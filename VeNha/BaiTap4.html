<!DOCTYPE html>
<html>
    <head>
        <title>Bài tập 4</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style>
            span{border: solid 1px #ACACAC; padding: 2px;}
        </style>
        <script language="javascript">

            var h = null; // Giờ
            var m = null; // Phút
            var s = null; // Giây
            
            var timeout = null; // Timeout
            
            function start()
            {
                // Lấy giá trị nhập vào và chuyển thành số nguyên
                h = parseInt(document.getElementById("h_val").value);
                m = parseInt(document.getElementById("m_val").value);
                s = parseInt(document.getElementById("s_val").value);

                // Hàm đếm ngược
                function countdown() {

                    // Hiển thị ra màn hình
                    document.getElementById("h").innerHTML = h;
                    document.getElementById("m").innerHTML = m;
                    document.getElementById("s").innerHTML = s;

                    // Giảm thời gian
                    s--;

                    if (s < 0) {
                        s = 59;
                        m--;
                    }
                    if (m < 0) {
                        m = 59;
                        h--;
                    }

                    // Nếu h, m, s đều hết → dừng
                    if (h < 0) {
                        clearTimeout(timeout);
                        alert("Hết giờ!");
                        return;
                    }

                    timeout = setTimeout(countdown, 1000); // gọi lại sau 1 giây
                }

                countdown(); // bắt đầu chạy lần đầu
            }
            
            function stop(){
                clearTimeout(timeout);
            }
        </script>
    </head>
    <body>
        <div>
            <strong>
                Nhập thông tin ban đầu: <br/>
            </strong>
            <input type="text" id="h_val" placeholder="Giờ" value=""/> <br/>
            <input type="text" id="m_val" placeholder="Phút" value=""/> <br/>
            <input type="text" id="s_val" placeholder="Giây" value=""/>
            <input type="button" value="Start" onclick="start()"/>
            <input type="button" value="Stop" onclick="stop()"/>  <br/> <br/>
        </div>
        
        <div>
            <span id="h">Giờ</span> :
            <span id="m">Phút</span> :
            <span id="s">Giây</span>
        </div>
    </body>
</html>
